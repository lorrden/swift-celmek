//
//  AirfoilTest.swift
//  
//
//  Created by Mattias Holm on 2023-11-03.
//

import XCTest
@testable import Aerodynamics

final class AirfoilTest: XCTestCase {
    func testParametricAirfoil() throws {
      let airfoilString = """
name: NACA 2412
generated-with: xfoil
data:
- reynolds-number: 1000000.0
  coefficients: # Alpha, CL, CD, CDp, CM
  - [-17.000,  -1.2296,   0.05928,  0.05617,  -0.0502]
  - [-16.000,  -1.2869,   0.03455,  0.03080,  -0.0685]
  - [-15.000,  -1.2674,   0.02752,  0.02333,  -0.0671]
  - [-14.000,  -1.2251,   0.02358,  0.01917,  -0.0608]
  - [-13.000,  -1.1561,   0.02124,  0.01656,  -0.0556]
  - [-12.000,  -1.0881,   0.01933,  0.01452,  -0.0492]
  - [-11.000,  -1.0222,   0.01737,  0.01233,  -0.0419]
  - [-10.000,  -0.9125,   0.01582,  0.01065,  -0.0430]
  - [ -9.000,  -0.7863,   0.01373,  0.00840,  -0.0475]
  - [ -8.000,  -0.6520,   0.01227,  0.00679,  -0.0530]
  - [ -7.000,  -0.5207,   0.01059,  0.00503,  -0.0578]
  - [ -6.000,  -0.4073,   0.00939,  0.00376,  -0.0579]
  - [ -5.000,  -0.3006,   0.00836,  0.00282,  -0.0565]
  - [ -4.000,  -0.1918,   0.00768,  0.00219,  -0.0555]
  - [ -3.000,  -0.0825,   0.00704,  0.00170,  -0.0547]
  - [ -2.000,   0.0272,   0.00653,  0.00140,  -0.0541]
  - [ -1.000,   0.1362,   0.00602,  0.00122,  -0.0534]
  - [  0.000,   0.2442,   0.00568,  0.00122,  -0.0525]
  - [  1.000,   0.3469,   0.00547,  0.00140,  -0.0499]
  - [  2.000,   0.4549,   0.00581,  0.00168,  -0.0482]
  - [  3.000,   0.5945,   0.00639,  0.00200,  -0.0542]
  - [  4.000,   0.7153,   0.00711,  0.00236,  -0.0566]
  - [  5.000,   0.8089,   0.00804,  0.00291,  -0.0531]
  - [  6.000,   0.9016,   0.00945,  0.00381,  -0.0497]
  - [  7.000,   0.9944,   0.01114,  0.00504,  -0.0467]
  - [  8.000,   1.0885,   0.01270,  0.00642,  -0.0440]
  - [  9.000,   1.1801,   0.01435,  0.00805,  -0.0409]
  - [ 10.000,   1.2696,   0.01591,  0.00970,  -0.0378]
  - [ 11.000,   1.3500,   0.01780,  0.01173,  -0.0333]
  - [ 12.000,   1.4114,   0.02015,  0.01423,  -0.0262]
  - [ 13.000,   1.4699,   0.02284,  0.01705,  -0.0201]
  - [ 14.000,   1.5228,   0.02622,  0.02064,  -0.0147]
  - [ 15.000,   1.5597,   0.03141,  0.02607,  -0.0101]
  - [ 16.000,   1.5775,   0.03935,  0.03427,  -0.0073]
  - [ 17.000,   1.5784,   0.05040,  0.04566,  -0.0073]
  - [ 18.000,   1.5415,   0.06805,  0.06374,  -0.0116]
  - [ 19.000,   1.4942,   0.08893,  0.08508,  -0.0189]
"""
      let airfoil = ParametricAirfoil(withString: airfoilString)!
      print("\(airfoil.liftCoefficient(at: 0.0, for: 1e6))")
      XCTAssert(0.2442 == airfoil.liftCoefficient(at: 0.0, for: 1e6))
    }
}
